<Window x:Name="main"
    x:Class="StreamOverlay.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:StreamOverlay"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
    Title="Stream Overlay"
Width="1920" Height="1080"
    Background="Black"
    Closed="Window_Closed"
    ResizeMode="NoResize"
    UseLayoutRounding="True"
    WindowState="Maximized"
    WindowStyle="None"
    Focusable="True"
    FocusManager.FocusedElement="{Binding ElementName=Animation}"
    mc:Ignorable="d">
    <Window.Resources>
        <local:CIVS x:Key="CivPool"/>
        <DrawingImage  x:Key="LoopNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="LoopActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="LoopClicked" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ProgressBarGradient}" Geometry="M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        
        <DrawingImage x:Key="CastingNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M21,17H3V5H21M21,3H3A2,2 0 0,0 1,5V17A2,2 0 0,0 3,19H8V21H16V19H21A2,2 0 0,0 23,17V5A2,2 0 0,0 21,3Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="CastingActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M21,17H3V5H21M21,3H3A2,2 0 0,0 1,5V17A2,2 0 0,0 3,19H8V21H16V19H21A2,2 0 0,0 23,17V5A2,2 0 0,0 21,3Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="PreviousNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="PreviousActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z" />
            </DrawingImage.Drawing>
        </DrawingImage>


        <DrawingImage x:Key="PlayNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M8.5,8.64L13.77,12L8.5,15.36V8.64M6.5,5V19L17.5,12" />
            </DrawingImage.Drawing>
        </DrawingImage>
        <DrawingImage x:Key="PlayActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
                <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M8.5,8.64L13.77,12L8.5,15.36V8.64M6.5,5V19L17.5,12" />
                </DrawingImage.Drawing>
            </DrawingImage>

        <DrawingImage x:Key="PauseNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
                <DrawingImage.Drawing>
                    <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M14,19H18V5H14M6,19H10V5H6V19Z" />
                </DrawingImage.Drawing>
            </DrawingImage>

        <DrawingImage x:Key="PauseActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M14,19H18V5H14M6,19H10V5H6V19Z" />
            </DrawingImage.Drawing>
        </DrawingImage>

        <DrawingImage  x:Key="NextNormal" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
                <DrawingImage.Drawing>
                    <GeometryDrawing Brush="{StaticResource ButtonTextGradient}" Geometry="M16,18H18V6H16M6,18L14.5,12L6,6V18Z" />
                </DrawingImage.Drawing>
            </DrawingImage>

        <DrawingImage  x:Key="NextActive" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <DrawingImage.Drawing>
                <GeometryDrawing Brush="{StaticResource ButtonTextGradientOver}" Geometry="M16,18H18V6H16M6,18L14.5,12L6,6V18Z" />
            </DrawingImage.Drawing>
        </DrawingImage>

    </Window.Resources>
    <Viewbox>
        <Grid Width="1920" Height="1080">
            <MediaElement Width="1920" Height="1080" HorizontalAlignment="Left" VerticalAlignment="Top" Volume="{Binding SoundVolume}" x:Name="AudioPlayer" LoadedBehavior="Manual" UnloadedBehavior="Manual" MediaEnded="AudioPlayer_MediaEnded"  />
            <vlc:VideoView Width="1920" Height="1080" HorizontalAlignment="Left" VerticalAlignment="Top"  x:Name="Animation" Focusable="True" >
                <Viewbox x:Name="VideoBox" HorizontalAlignment="Left" VerticalAlignment="Top">
                    <Grid >
                        <Canvas Width="1920" Height="1080" HorizontalAlignment="Left" VerticalAlignment="Top"  x:Name="OverlayCanvas" PreviewMouseMove="ObjectMouseMove" Background="#01000000" MouseDown="OverlayCanvas_MouseDown">

                                    <Image x:Name="PreviewImage" />
                            <Grid x:Name="gBrandLogo" MouseLeftButtonDown="ObjectMouseDown"
                                  Panel.ZIndex="1"
                                MouseLeftButtonUp="ObjectMouseUp">
                                <Grid.Triggers>

                                    <EventTrigger  RoutedEvent="MouseEnter">
                                        <BeginStoryboard >
                                            <Storyboard   >
                                                <DoubleAnimation Storyboard.Target="{Binding Source={x:Reference sBrandLogo}}" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard >
                                                <DoubleAnimation Storyboard.Target="{Binding Source={x:Reference sBrandLogo}}" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>

                                </Grid.Triggers>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <Image
                                x:Name="iBrandLogo"
                                Width="405"  
                                    RenderOptions.BitmapScalingMode="HighQuality"

                        RenderTransformOrigin="0.5,0.5">

                                    <Image.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform />
                                        </TransformGroup>
                                    </Image.RenderTransform>
                                    <Image.Effect>
                                    <DropShadowEffect
                                            BlurRadius="20"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="3"
                                            Color="#f0000000" />
                                </Image.Effect>
                            </Image>
                                <Slider
                                    Name="sBrandLogo"
                      Width="400"
                                            Grid.Row="1"
Focusable="False"
                                    Opacity="0"
                                            VerticalAlignment="Center"
                                    Minimum="-50"
                                            Maximum="50"
                                            SmallChange="1"
                                            Value="0" ValueChanged="Slider_ValueChanged" />
                            </Grid>
                            <Grid x:Name="gEventLogo" 
                                  Panel.ZIndex="1"
                                  MouseLeftButtonDown="ObjectMouseDown"
                                    MouseLeftButtonUp="ObjectMouseUp"
                                >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <Grid.Triggers>

                                    <EventTrigger  RoutedEvent="MouseEnter">
                                        <BeginStoryboard >
                                            <Storyboard   >
                                                <DoubleAnimation Storyboard.Target="{Binding Source={x:Reference sEventLogo}}" Storyboard.TargetProperty="Opacity" To="1" Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard >
                                                <DoubleAnimation Storyboard.Target="{Binding Source={x:Reference sEventLogo}}" Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>

                                </Grid.Triggers>
                                <Image
                                x:Name="iEventLogo"
                                
                                Width="700"
                                                    
                                    RenderOptions.BitmapScalingMode="HighQuality"

                        RenderTransformOrigin="0.5,0.5">

                                    <Image.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform />
                                        </TransformGroup>
                                    </Image.RenderTransform>
                                    <Image.Effect>
                                        <DropShadowEffect
                                            BlurRadius="20"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="3"
                                            Color="#f0000000" />
                                    </Image.Effect>

                                </Image>
                                <Slider
                                    Name="sEventLogo"
           Opacity="0"
                                            Grid.Row="1"
Width="400"
                                            VerticalAlignment="Center"
                                    Minimum="-50"
                                    Focusable="False"
                                            Maximum="50"
                                            SmallChange="1"
                                            Value="0" ValueChanged="Slider_ValueChanged_1">
                      
                                </Slider>
                            </Grid>
                            <Grid
                                x:Name="gMapPool"
                                Panel.ZIndex="1"
                                PreviewMouseLeftButtonDown="ObjectMouseDown"
                                PreviewMouseLeftButtonUp="ObjectMouseUp">
                                <Grid.Effect>
                                    <DropShadowEffect
                                            BlurRadius="20"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="3"
                                            Color="#f0000000" />
                                </Grid.Effect>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>
                                <Image
                                    x:Name="ibMapIcon"
                                    Grid.Row="0"
                                    Width="250"
                                    Height="250"
                                    Margin="0,10,0,0"
                                    VerticalAlignment="Top"
                                    RenderOptions.BitmapScalingMode="HighQuality"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Image.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform x:Name="stMap" />
                                        </TransformGroup>
                                    </Image.RenderTransform>
                                </Image>
                                <Grid Grid.Row="1">
                                    <Grid.OpacityMask>
                                        <ImageBrush ImageSource="/resources/history_image_mask.png" />
                                    </Grid.OpacityMask>
                                    <Grid
                                        Grid.RowSpan="2"
                                        Background="Black"
                                        Opacity="0.3" />
                                    <Image
                                        Width="405"
                                        Height="55"
                                        Margin="0,3,0,0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom"
                                        Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                    <TextBlock
                                        x:Name="tbMapPool"
                                        Margin="0,0,0,10"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom"
                                        FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="25"
                                        FontWeight="Bold"
                                        Foreground="{StaticResource ButtonTextGradient}"
                                        Text="">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                                                BlurRadius="3"
                                                Direction="-90"
                                                RenderingBias="Quality"
                                                ShadowDepth="1.7"
                                                Color="Black" />
                                        </TextBlock.Effect>
                                        <TextBlock.OpacityMask>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop x:Name="MapBlackStop" Offset="0" Color="Black" />
                                                <GradientStop x:Name="MapTransparentStop" Offset="0" Color="Transparent" />
                                            </LinearGradientBrush>
                                        </TextBlock.OpacityMask>
                                    </TextBlock>
                                    <TextBlock
                                        x:Name="tbBO"
                                        Margin="0,0,0,10"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom"
                                        FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="25"
                                        FontWeight="Bold"
                                        Foreground="White"
                                        Text="">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                                                BlurRadius="3"
                                                Direction="-90"
                                                RenderingBias="Quality"
                                                ShadowDepth="1.7"
                                                Color="Black" />
                                        </TextBlock.Effect>
                                        <TextBlock.OpacityMask>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop x:Name="BOBlackStop" Offset="0" Color="Black" />
                                                <GradientStop x:Name="BOTransparentStop" Offset="0" Color="Transparent" />
                                            </LinearGradientBrush>
                                        </TextBlock.OpacityMask>
                                    </TextBlock>
                                </Grid>
                            </Grid>
                            <Grid
                                x:Name="gCountdown"
                                Panel.ZIndex="1"
                                PreviewMouseLeftButtonDown="ObjectMouseDown"
                                PreviewMouseLeftButtonUp="ObjectMouseUp">
                                <Grid.OpacityMask>
                                    <ImageBrush ImageSource="/resources/history_image_mask.png" />
                                </Grid.OpacityMask>
                                <Grid.Effect>
                                    <DropShadowEffect
                                        BlurRadius="20"
                                        Direction="-90"
                                        RenderingBias="Quality"
                                        ShadowDepth="3"
                                        Color="#f0000000" />
                                </Grid.Effect>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>
                                <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                <TextBlock
                                    Margin="0,0,0,5"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="COUNTDOWN">
                                    <TextBlock.Effect>
                                        <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBlock
                                    x:Name="lTimer"
                                    Grid.Row="1"
                                    Margin="10"
                                    HorizontalAlignment="Center"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="60"
                                    Foreground="White"
                                    Text="{Binding Time}" />
                            </Grid>

           
                            <Grid
                                x:Name="gSchedule"
                                Panel.ZIndex="1"
                                
                                PreviewMouseLeftButtonDown="ObjectMouseDown"
                                PreviewMouseLeftButtonUp="ObjectMouseUp">
                                <Grid.OpacityMask>
                                    <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                </Grid.OpacityMask>
                                <Grid.Effect>
                                    <DropShadowEffect
                                        BlurRadius="20"
                                        Direction="-90"
                                        RenderingBias="Quality"
                                        ShadowDepth="3"
                                        Color="#f0000000" />
                                </Grid.Effect>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>
                                
                                <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="SCHEDULE">
                                    <TextBlock.Effect>
                                        <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                    </TextBlock.Effect>
                                </TextBlock>
                                <TextBox
                                    x:Name="Schedule"
                                    Grid.Row="1"
                                    Width="385"
                                    Height="450"
                                    Margin="10"
                                    HorizontalContentAlignment="Center"
                                    AcceptsReturn="True"
                                    Background="Transparent"
                                    BorderBrush="{x:Null}"
                                    BorderThickness="0"
                                     CaretBrush="#60ffffff"
                                    SelectionBrush="#60ffffff"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="24"
                                    Foreground="White"
                                  
                                    TextWrapping="Wrap" />
                            </Grid>
                            <Grid  Height="1080" x:Name="gPlayersPanel">

                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="2" VerticalAlignment="Bottom" Height="280">
                                    <Grid.Background>
                                        <LinearGradientBrush EndPoint="1,1" StartPoint="0,0">
                                            <GradientStop Color="#40000000"  Offset="1"/>
                                            <GradientStop Color="#A0000000" Offset="0.5"/>
                                            <GradientStop Color="#40000000" Offset="0"/>
                                        </LinearGradientBrush>
                                    </Grid.Background>
                                </Grid>
                                <Image
                                    Width="1920"
                                    Grid.Row="1" 
                                
                                    VerticalAlignment="Top"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                <Image Grid.Row="0" Grid.RowSpan="3" HorizontalAlignment="Left" Grid.Column="0" VerticalAlignment="Bottom" Height="400"   x:Name="iTeam1"/>
                                <Image Grid.Row="0" Grid.RowSpan="3" VerticalAlignment="Bottom"  Height="400" HorizontalAlignment="Right" x:Name="iTeam2"/>


                                <Grid Height="270" Width="1292"  Grid.RowSpan="3" VerticalAlignment="Bottom" Margin="0,0,0,147">
                                    <Grid.Background>
                                        <ImageBrush ImageSource="/resources/skirmish_victory.png"/>
                                    </Grid.Background>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Grid  Grid.Column="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition Width="auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox 
                                   Grid.Column="0"
                                    Margin="60,10,0,0"
                                  Text="Player1's Team"
                                    x:Name="tbTeam1"
                                    VerticalAlignment="Center"
                                        
                                  
                                    Background="Transparent"
                                    BorderBrush="{x:Null}"
                                    BorderThickness="0"
                                 
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="32"
                                    Foreground="White"
                                            CaretBrush="#60ffffff"
                                    SelectionBrush="#60ffffff"
                                    />
                                        <TextBlock 
                                   Grid.Column="1"
                                  Margin="0,20,130,0"
                                           x:Name="tbTeam1Score"
                                  Text="{Binding Team1Score}"
                                    
                                    VerticalAlignment="Center"
                                        
                                  
                                    Background="Transparent"
                                 
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="70"
                                 FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                 
                                    />
                                    </Grid>
                                    <Grid  Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition Width="auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox 
                                   Grid.Column="1"
                                    VerticalAlignment="Center"
                                  Text="Player2's Team"
                                   x:Name="tbTeam2"
                                 FlowDirection="RightToLeft"
                                         Margin="0,10,60,0"
                                  
                                    Background="Transparent"
                                    BorderBrush="{x:Null}"
                                    BorderThickness="0"
                                  
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="32"
                                    Foreground="White"
                                    CaretBrush="#60ffffff"
                                    SelectionBrush="#60ffffff"
                                    />
                                        <TextBlock 
                                   Grid.Column="0"
                                  Margin="130,20,0,0"
                                            x:Name="tbTeam2Score"
                                  Text="{Binding Team2Score}"
                                    
                                    VerticalAlignment="Center"
                                        
                                  
                                    Background="Transparent"
                                 
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="70"
                                 FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                 
                                    />
                                    </Grid>

                                </Grid>




                            </Grid>
                            <Grid x:Name="gPlayers" Height="1080" Panel.ZIndex="1" VerticalAlignment="Bottom" >
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="400"/>
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="1"  Width="1920" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Grid Grid.Column="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="320"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                    

                                        <Grid Grid.Column="1" Margin="0,175,0,0" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto"/>
                                                <RowDefinition Height="auto"/>
                                                <RowDefinition Height="auto"/>
                                            </Grid.RowDefinitions>

                                            <ListView Grid.Row="0"  Grid.IsSharedSizeScope="True" Width="550" HorizontalAlignment="Left"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam1Player1CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team1_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True"

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}"
       >
                                                                <Grid >
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>
                                            <ListView Grid.Row="1" Panel.ZIndex="5" Grid.IsSharedSizeScope="True" Width="550" HorizontalAlignment="Left"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam1Player2CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team1_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True"

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}"
       >
                                                                <Grid >
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>
                                            <ListView Grid.Row="2"   Grid.IsSharedSizeScope="True" Width="550" HorizontalAlignment="Left"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam1Player3CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team1_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True"

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}"
       >
                                                                <Grid >
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>

                                        </Grid>
                                    </Grid>


                                    <Grid Grid.Column="1" >
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition  Width="320"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid Margin="0,175,0,0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto"/>
                                                <RowDefinition Height="auto"/>
                                                <RowDefinition Height="auto"/>
                                            </Grid.RowDefinitions>
                                            <ListView Grid.Row="0"  HorizontalAlignment="Right"  Width="550" Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam2Player1CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" HorizontalAlignment="Right" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team2_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True"

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}"
       >
                                                                <Grid >
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>
                                            <ListView  Grid.Row="1"  HorizontalAlignment="Right"   Width="550" Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam2Player2CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" HorizontalAlignment="Right" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team2_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True"

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}"
       >
                                                                <Grid >
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>
                                            <ListView Grid.Row="2"  HorizontalAlignment="Right"  Width="550" Grid.IsSharedSizeScope="True"    ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent" x:Name="lwTeam2Player3CivPool">
                                                <ListView.ItemContainerStyle>
                                                    <Style TargetType="ListViewItem">
                                                        <Setter Property="Focusable" Value="False" />
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                    <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                        <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                    </Border>
                                                                    <ControlTemplate.Triggers>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="IsMouseOver" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                <Condition Property="IsSelected" Value="False" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <MultiTrigger>
                                                                            <MultiTrigger.Conditions>
                                                                                <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                <Condition Property="IsSelected" Value="True" />
                                                                            </MultiTrigger.Conditions>
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                            <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                        </MultiTrigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </ListView.ItemContainerStyle>
                                                <ListView.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel Background="Transparent" HorizontalAlignment="Right" Orientation="Horizontal" />
                                                    </ItemsPanelTemplate>
                                                </ListView.ItemsPanel>
                                                <ListView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Grid ToolTipService.IsEnabled="False" Tag="{Binding Path=Tag}" MouseRightButtonDown="Team2_MouseDown">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition/>
                                                                <RowDefinition/>


                                                            </Grid.RowDefinitions>
                                                            <Image x:Name="civ" Grid.Row="0" Height="64" Source="{Binding Path=Icon}">
                                                                <Image.Triggers>
                                                                    <EventTrigger RoutedEvent="Image.MouseLeftButtonUp">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames 
                                 Storyboard.TargetName="CivPickPopup" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="True" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                </Image.Triggers>
                                                            </Image>
                                                            <Popup  x:Name="CivPickPopup" StaysOpen="False" AllowsTransparency="True" 

PopupAnimation="Fade"
       PlacementTarget="{Binding ElementName=civ}" 
       >
                                                                <Grid>
                                                                    <Grid.OpacityMask>
                                                                        <ImageBrush ImageSource="/resources/history_image_mask_vertical.png" />
                                                                    </Grid.OpacityMask>

                                                                    <Grid.RowDefinitions>
                                                                        <RowDefinition Height="auto" />
                                                                        <RowDefinition Height="auto" />
                                                                    </Grid.RowDefinitions>

                                                                    <Grid
                                    Grid.RowSpan="2"
                                    Background="Black"
                                    Opacity="0.3" />
                                                                    <Image
                                    Width="405"
                                    Height="55"
                                    Margin="0,0,0,0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/campaignselect_textbg.png" />
                                                                    <Image
                                    Width="405"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                                                                    <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="25"
                                    FontWeight="Bold"
                                    Foreground="{StaticResource ButtonTextGradient}"
                                    Text="CIV PICKER">
                                                                        <TextBlock.Effect>
                                                                            <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                        </TextBlock.Effect>
                                                                    </TextBlock>

                                                                    <ListView Grid.Row="1"  Grid.IsSharedSizeScope="True"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderBrush="Transparent"  Width="380"  ItemsSource="{Binding Source={StaticResource  CivPool}}">
                                                                        <ListView.ItemContainerStyle>
                                                                            <Style TargetType="ListViewItem">
                                                                                <Setter Property="Focusable" Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type ListViewItem}">
                                                                                            <Border
                                                                x:Name="Bd"
                                                                Padding="{TemplateBinding Padding}"
                                                                Background="{TemplateBinding Background}"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                SnapsToDevicePixels="True">
                                                                                                <ContentPresenter
                                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                    Content="{TemplateBinding Content}"
                                                                    ContentStringFormat="{TemplateBinding ContentStringFormat}"
                                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                                                                            </Border>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="IsMouseOver" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />

                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="False" />
                                                                                                        <Condition Property="IsSelected" Value="False" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <MultiTrigger>
                                                                                                    <MultiTrigger.Conditions>
                                                                                                        <Condition Property="Selector.IsSelectionActive" Value="True" />
                                                                                                        <Condition Property="IsSelected" Value="True" />
                                                                                                    </MultiTrigger.Conditions>
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                    <Setter TargetName="Bd" Property="BorderBrush" Value="Transparent" />
                                                                                                </MultiTrigger>
                                                                                                <Trigger Property="IsEnabled" Value="False">
                                                                                                    <Setter TargetName="Bd" Property="Background" Value="Transparent" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </ListView.ItemContainerStyle>
                                                                        <ListView.ItemsPanel>
                                                                            <ItemsPanelTemplate>
                                                                                <WrapPanel Background="Transparent" Orientation="Horizontal" />
                                                                            </ItemsPanelTemplate>
                                                                        </ListView.ItemsPanel>
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <DataTemplate.Triggers>

                                                                                    <MultiDataTrigger>
                                                                                        <MultiDataTrigger.Conditions>
                                                                                            <Condition Binding="{Binding ElementName=g, Path=IsMouseOver}" Value="True" />

                                                                                        </MultiDataTrigger.Conditions>
                                                                                        <MultiDataTrigger.EnterActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1.2"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.EnterActions>
                                                                                        <MultiDataTrigger.ExitActions>
                                                                                            <BeginStoryboard>
                                                                                                <Storyboard>

                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleX"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>
                                                                                                    <DoubleAnimation
                                                                        Storyboard.TargetName="stMapIcon"
                                                                        Storyboard.TargetProperty="ScaleY"
                                                                        To="1"
                                                                        Duration="0:0:0.2">
                                                                                                        <DoubleAnimation.EasingFunction>
                                                                                                            <CircleEase EasingMode="EaseInOut" />
                                                                                                        </DoubleAnimation.EasingFunction>
                                                                                                    </DoubleAnimation>

                                                                                                </Storyboard>
                                                                                            </BeginStoryboard>
                                                                                        </MultiDataTrigger.ExitActions>
                                                                                    </MultiDataTrigger>
                                                                                </DataTemplate.Triggers>
                                                                                <Grid>

                                                                                    <Image ToolTipService.IsEnabled="False" Tag="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}, Path=PlacementTarget.DataContext}" ToolTip="{Binding Path=Id}"  RenderOptions.BitmapScalingMode="HighQuality"
                                                            RenderTransformOrigin="0.5,0.5" x:Name="g" Width="64" Height="64" Source="{Binding Path=Icon}" MouseDown="g_MouseDown">
                                                                                        <Image.Triggers>
                                                                                            <EventTrigger RoutedEvent="Image.MouseLeftButtonDown">
                                                                                                <EventTrigger.Actions>
                                                                                                    <BeginStoryboard>
                                                                                                        <Storyboard>
                                                                                                            <BooleanAnimationUsingKeyFrames 
                                 Storyboard.Target="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Popup}}}" 
                                 Storyboard.TargetProperty="IsOpen">
                                                                                                                <DiscreteBooleanKeyFrame KeyTime="0:0:0" Value="False" />
                                                                                                            </BooleanAnimationUsingKeyFrames>
                                                                                                        </Storyboard>
                                                                                                    </BeginStoryboard>
                                                                                                </EventTrigger.Actions>
                                                                                            </EventTrigger>
                                                                                        </Image.Triggers>
                                                                                        <Image.RenderTransform>
                                                                                            <TransformGroup>
                                                                                                <ScaleTransform x:Name="stMapIcon" />
                                                                                            </TransformGroup>
                                                                                        </Image.RenderTransform>
                                                                                    </Image>
                                                                                </Grid>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>

                                                                </Grid>
                                                            </Popup>
                                                            <Image Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Right" Height="32" Source="{Binding Path=StatusIcon}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                                            BlurRadius="3"
                                            Direction="-90"
                                            RenderingBias="Quality"
                                            ShadowDepth="1.7"
                                            Color="Black" />
                                                                </Image.Effect>
                                                            </Image>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ListView.ItemTemplate>
                                            </ListView>

                                        </Grid>

                                    </Grid>
                                </Grid>

                            </Grid>

                            <Grid x:Name="gTwitchInfo" MouseLeftButtonDown="ObjectMouseDown"
                                  Panel.ZIndex="1"
                                MouseLeftButtonUp="ObjectMouseUp">
                           

                                <Grid  HorizontalAlignment="Left" Margin="55,0,0,0" >

                                    <Grid>
                                        <TextBox HorizontalAlignment="Left" Text="casted by CasterName " 
                           MinWidth="320" MaxWidth="650" Padding="0,0,15,0" Margin="40,60,0,0" Style="{StaticResource hcInfoName}">
                                            <TextBox.OpacityMask>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                    <GradientStop x:Name="CasterBlackStop" Offset="0" Color="Black" />
                                                    <GradientStop x:Name="CasterTransparentStop" Offset="0" Color="Transparent" />
                                                </LinearGradientBrush>
                                            </TextBox.OpacityMask>
                                        </TextBox>
                                        <Control HorizontalAlignment="Left" VerticalAlignment="Top"   x:Name="resourcePanelBG" Style="{StaticResource Ingame_PanelBGStyle}" Height="61" Width="840" Margin="0,9,0,0" />


                                        <StackPanel x:Name="resourcePanel" VerticalAlignment="Top"  Margin="0,9,0,0"  Orientation="Horizontal">
                                            <StackPanel.Resources>
                                                <Style TargetType="TextBlock" BasedOn="{StaticResource RegularTextBlockStyle}">
                                                    <Setter Property="FontFamily" Value="/Fonts/#Trajan Pro 3" />
                                                    <Setter Property="FontWeight" Value="Bold" />
                                                    <Setter Property="FontSize" Value="18" />
                                                    <Setter Property="Foreground" Value="White" />
                                                    <Setter Property="HorizontalAlignment" Value="Left" />
                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                    <Setter Property="TextAlignment" Value="Left" />
                                                    <Setter Property="Height" Value="auto" />
                                                    <Setter Property="Width" Value="auto" />
                                                    <Setter Property="Margin" Value="5,2,5,2" />
                                                    <Setter Property="Effect">
                                                        <Setter.Value>
                                                            <DropShadowEffect BlurRadius="3" Color="Black" Direction="-90" ShadowDepth="3" RenderingBias="Quality" />
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </StackPanel.Resources>

                                            <StackPanel x:Name="resourcePanel2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="40,10,30,0" Visibility="Visible">
                                                <TextBlock MinWidth="320" FontSize="28" Foreground="{StaticResource ButtonTextGradient}" x:Name="TwitchChannel" Margin="20,3,0,0" Text=""/>
                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" >
                                                    
                                                    <Rectangle Width="40" Height="40" Margin="0,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource uiresourcesicon_bg}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <Rectangle Width="40" Height="40" Margin="-40,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource resource_pop}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Width="70">
                                                        <TextBlock Margin="5,4,0,0" FontSize="22" x:Name="twitchFollowers" Text="---"/>

                                                    </StackPanel>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" >

                                                    <Rectangle Width="40" Height="40" Margin="0,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource uiresourcesicon_bg}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <Rectangle Width="40" Height="40" Margin="-40,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource resource_villagers}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="70">
                                                        <TextBlock Margin="5,4,0,0" FontSize="22" x:Name="twitchViewers" Text="---"/>

                                                    </StackPanel>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" >

                                                    <Rectangle Width="40" Height="40" Margin="0,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource uiresourcesicon_bg}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <Rectangle Width="40" Height="40" Margin="-40,0,0,0">
                                                        <Rectangle.Fill>
                                                            <ImageBrush ImageSource="{StaticResource resource_time}" />
                                                        </Rectangle.Fill>
                                                    </Rectangle>

                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" MinWidth="70">
                                                        <TextBlock Margin="5,4,0,0" FontSize="22" x:Name="twitchStreamLength" Text="---"/>

                                                    </StackPanel>
                                                </StackPanel>

                                            </StackPanel>
                                        </StackPanel>
                                    </Grid>


                                </Grid>
                                <Button ToolTip="Show Caster Name" VerticalAlignment="Top" Margin="0" HorizontalAlignment="Left" Style="{StaticResource HomeCityHUDButton}" Focusable="False" Click="Button_Click" />
                            </Grid>
                            <Grid   x:Name="gScorePanel" 
                                  Panel.ZIndex="1"    Width="600" Height="60" 
                                >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <Grid.Background>
                                    <ImageBrush ImageSource="/resources/images/hud/resources_bg.png"/>
                                </Grid.Background>
                                                 <TextBox  VerticalContentAlignment="Center" Width="560" Height="60" Margin="20,0"  x:Name="tbScoreText"
   HorizontalContentAlignment="Center"
                             Text="Someone 0:0 Somebody"
                                    Background="Transparent"
                                    BorderBrush="{x:Null}"
                                    BorderThickness="0"
                                     CaretBrush="#60ffffff"
                                    SelectionBrush="#60ffffff"
                                    FontFamily="/Fonts/#Trajan Pro 3"
                                    FontSize="24"
                                    Foreground="White"
                                  />
                            </Grid>

                            <Grid x:Name="gPlaybackControl" Width="1920" Height="150" Opacity="0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Grid.Background>
                                    <LinearGradientBrush EndPoint="0,0" StartPoint="0,1">
                                        <GradientStop Color="#90000000" Offset="0"/>
                                        <GradientStop Color="#00000000"  Offset="1"/>
                                    
                                       
                                    </LinearGradientBrush>
                                </Grid.Background>
                                <Grid.Triggers>

                                    <EventTrigger  RoutedEvent="MouseEnter">
                                        <BeginStoryboard >
                                            <Storyboard   >
                                                <DoubleAnimation Storyboard.TargetProperty="Opacity" To="1" BeginTime="0:0:0.4"  Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard >
                                                <DoubleAnimation Storyboard.TargetProperty="Opacity" To="0" Duration="0:0:0.8">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CircleEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>

                                </Grid.Triggers>

                                <StackPanel VerticalAlignment="Center" Grid.Row="1" Margin="20" Orientation="Horizontal">
                                    <TextBlock FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="25"
                                        FontWeight="Bold"
                                        Foreground="{StaticResource ButtonTextGradient}" VerticalAlignment="Center" Text="Volume ">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </TextBlock.Effect>
                                    </TextBlock>
                                    <Slider DockPanel.Dock="Left" VerticalAlignment="Center" Width="300" Grid.Row="0" x:Name="sVolume" Value="0.5"  Minimum="0" Maximum="1" Focusable="False" ValueChanged="sVolume_ValueChanged"/>
                                    
                                </StackPanel>
                                <StackPanel Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center"  Orientation="Horizontal">
                                    <CheckBox Focusable="False" Width="30" Height="40" Margin="25,15" 
                                x:Name="cbLoop">
                                        <CheckBox.Style>
                                            <Style TargetType="CheckBox">

                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="CheckBox">
                                                            <Image Name="Icon" Source="{StaticResource LoopNormal}">
                                                                <Image.Effect>
                                                                    <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                                                </Image.Effect>
                                                            </Image>




                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" 
                     Value="True">
                                                                    <Setter TargetName="Icon" Property="Source" Value="{StaticResource LoopActive}"/>
                                                                </Trigger>
                                                                <Trigger Property="IsChecked" 
                     Value="True">
                                                                    <Setter TargetName="Icon" Property="Source" Value="{StaticResource LoopClicked}"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>


                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </CheckBox.Style>
                                  
                                    </CheckBox>
                                    <TextBlock Text="I" FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="30"
                                        FontWeight="UltraBlack"
                                               Margin="0,25,12,0" MouseDown="TextBlock_MouseDown">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </TextBlock.Effect>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource ButtonTextGradient}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource ButtonTextGradientOver}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <TextBlock Margin="0,25,30,0" Text="II" FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="30"
                                        FontWeight="UltraBlack" MouseDown="TextBlock_MouseDown_1">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </TextBlock.Effect>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource ButtonTextGradient}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource ButtonTextGradientOver}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <Image Width="30" Margin="15" MouseDown="Image_MouseDown">
                                        <Image.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </Image.Effect>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{StaticResource PreviousNormal}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" 
                     Value="True">
                                                        <Setter Property="Source" Value="{StaticResource PreviousActive}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    <Image x:Name="bPlay" Width="40"  Height="50" Margin="15" MouseDown="Image_MouseDown_1">
                                        <Image.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </Image.Effect>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{StaticResource PlayNormal}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" 
                     Value="True">
                                                        <Setter Property="Source" Value="{StaticResource PlayActive}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                   
                                    </Image>
                                    <Image x:Name="bPause" Width="40" Height="50" Margin="15" MouseDown="Image_MouseDown_2">
                                        <Image.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </Image.Effect>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{StaticResource PauseNormal}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" 
                     Value="True">
                                                        <Setter Property="Source" Value="{StaticResource PauseActive}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                      
                                    </Image>
                                    <Image Width="30" Margin="15" MouseDown="Image_MouseDown_3">
                                        <Image.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />        </Image.Effect>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{StaticResource NextNormal}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" 
                     Value="True">
                                                        <Setter Property="Source" Value="{StaticResource NextActive}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>

                                    </Image>


                                    <TextBlock  Margin="30,25,12,0" Text="III" FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="30" FontStretch="UltraCondensed"
                                        FontWeight="UltraBlack" MouseDown="TextBlock_MouseDown_2">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />       </TextBlock.Effect>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource ButtonTextGradient}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource ButtonTextGradientOver}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                    <TextBlock Margin="0,25,12,0" Text="IV" FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="30"
                                        FontWeight="UltraBlack" MouseDown="TextBlock_MouseDown_3">
                                        <TextBlock.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />        </TextBlock.Effect>
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="{StaticResource ButtonTextGradient}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Foreground" Value="{StaticResource ButtonTextGradientOver}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>

                                    <Image Width="30" Margin="25,15" MouseDown="TextBlock_MouseDown_4">
                                        <Image.Effect>
                                            <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                        </Image.Effect>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{StaticResource CastingNormal}"/>
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" 
                     Value="True">
                                                        <Setter Property="Source" Value="{StaticResource CastingActive}" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>


                                </StackPanel>


                                <TextBlock Margin="20,20,0,0"              FontFamily="/Fonts/#Trajan Pro 3"
                                        FontSize="25"
                                        FontWeight="Bold"
                                        Foreground="White" x:Name="tbAudioName">
                                    <TextBlock.Effect>
                                        <DropShadowEffect
                    BlurRadius="3"
                    Direction="-90"
                    RenderingBias="Quality"
                    ShadowDepth="1"
                    Color="Black" />
                                    </TextBlock.Effect>
                                </TextBlock>


                
                   
                                <Image
                                    Width="1920"
                                    Grid.Row="1" 
                                Height="2"
                                    VerticalAlignment="Bottom"
                                    Source="/resources/images/campaignmenu/LevelSelectDivider.png" />
                            </Grid>
                        </Canvas>
                    </Grid>
                </Viewbox>
            </vlc:VideoView>

        </Grid>
    </Viewbox>
</Window>
